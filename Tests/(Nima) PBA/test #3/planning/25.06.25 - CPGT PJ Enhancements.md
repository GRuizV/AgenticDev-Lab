# ğŸ›  Improvement Plan â€“ Test #3 (PDF Expense Extractor)

## ğŸ“¦ Overview
This document captures key issues and actionable improvements for the current state of the Test #3 system, based on walkthrough analysis and folder inspection.

---

## ğŸ§± Project Structure Fixes

| Problem | Recommended Fix |
|---------|------------------|
| Planning `.md` files mixed with code | Move to `planning/` or `docs/` folder |
| `test_extractor.py` is flat and top-level | Create a structured `tests/` folder |
| `debug/` is overloaded | Split into: `debug_logs/`, `dev_scratch/`, `validation_fixes/` |

---

## ğŸ§ª Testing & Validation Improvements

| Problem | Recommended Fix |
|---------|------------------|
| No unit test organization | Add `tests/test_parsers.py`, `test_utils.py`, etc. |
| Manual test execution | Use `pytest` with fixtures and CLI args |
| Expected values inline | Store in versioned `expected/` subfolder |

---

## ğŸ“ˆ Metrics & Result Reporting

| Problem | Recommended Fix |
|---------|------------------|
| Raw metrics only | Output `.csv` files to `metrics/` folder |
| No trend tracking | Plot precision/recall/F1 over time using `matplotlib` |
| No reference comparison | Add CLI diff mode vs `expected_results.py` |

---

## ğŸ¤– Roo Integration Enhancements

| Problem | Recommended Fix |
|---------|------------------|
| No changelog of tasks | Add `CHANGELOG.md` or `roo_trace_log.md` |
| Agent traces not preserved | Add `/agent_logs/` and store all `.md` outputs |
| `.roorules-*` not reused | Create rulebases: `scaffold_extractor.roorules`, `evaluation_logic.roorules` |
| Prompts undocumented | Track them in `prompts/` folder with versions and outcomes |

---

## ğŸ§° Code-Level Refactors

| Problem | Recommended Fix |
|---------|------------------|
| Parser logic unclear | Ensure `pdf_parser_factory` is invoked in `main.py` |
| CLI parsing not connected | Wire `cli_interface.py` directly into app entry |
| Hardcoded filepaths | Use `settings.py` or `argparse` for all I/O |
| Output is fixed | Allow export format to be passed: `--format csv|json|md` |

---

## ğŸ“ Suggested Folder Layout

test #3/
â”œâ”€â”€ pdf_expense_extractor/
â”‚ â”œâ”€â”€ core/
â”‚ â”œâ”€â”€ config/
â”‚ â”œâ”€â”€ models/
â”‚ â”œâ”€â”€ parsers/
â”‚ â”œâ”€â”€ utils/
â”‚ â””â”€â”€ main.py
â”œâ”€â”€ tests/
â”œâ”€â”€ prompts/
â”œâ”€â”€ agent_logs/
â”œâ”€â”€ planning/
â”œâ”€â”€ metrics/
â”œâ”€â”€ debug_logs/
â”œâ”€â”€ README.md
â””â”€â”€ CHANGELOG.md

---

## ğŸ”œ Next Step

Use these fixes to refactor the project before resuming agentic development with Roo. Then define a scoped task set for re-engagement.